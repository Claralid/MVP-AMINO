<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AminoWeb: Perfil Modular</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      background: #F9FAFB;
      font-family: 'Inter', sans-serif;
      display: flex;
    }
    .rounded-super { border-radius: 28px; }
    .input-mock {
      border-radius: 14px;
      border: 1.5px solid #E5E7EB;
      background: #fff;
      font-size: 1rem;
      padding: 0.75rem 1.1rem;
    }
    .btn-mock {
      border-radius: 16px;
      background: #B6D9ED;
      color: #fff;
      font-weight: 600;
      font-size: 1.1rem;
      padding: 0.8rem 0;
      transition: background 0.2s;
      box-shadow: 0 2px 6px #b6d9ed25;
    }
    .btn-mock:hover {
      background: #a4cbe0;
    }
    .card-mock {
      border-radius: 24px;
      border: 1.5px solid #ECECEC;
      background: #fff;
      box-shadow: 0 4px 16px 0 #dbeafe40;
      padding: 2rem 1.3rem;
      position: relative;
    }
    .shadow-super { box-shadow: 0 4px 18px #dbeafe42; }
    .blue-text {
      color: #7BA9C8;
      font-weight: 600;
      font-size: 1.6rem;
      letter-spacing: 0.02em;
    }
    .icon-social { background: #F2F7FA; border-radius: 50%; padding: 0.6rem; }
    .icon-social i { display: block; }
    .closeSectionBtn {
      position: absolute;
      top: 1.1rem;
      right: 1.1rem;
      background: #fff;
      border-radius: 9999px;
      padding: 0.2rem;
      border: 1px solid #E5E7EB;
      box-shadow: 0 1px 4px #dbeafe44;
      z-index: 10;
      transition: background 0.15s;
    }
    .closeSectionBtn:hover {
      background: #F3F5F8;
    }

    .modal-sheet {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  background: #fff;
  border-top-left-radius: 1rem;
  border-top-right-radius: 1rem;
  box-shadow: 0 -4px 18px rgba(27,46,139,0.1);
  padding: 1.5rem;
  transform: translateY(100%);
  transition: transform 0.3s ease;
  z-index: 70;
}
.modal-sheet.open {
  transform: translateY(0);
}
  </style>
</head>
<body class="text-gray-800">


  <!-- Bot√≥n hamburguesa (m√≥vil) -->
  <button id="openSidebar" class="fixed top-4 left-4 z-30 lg:hidden bg-white rounded-full shadow-md p-2">
    <i data-lucide="menu" class="w-6 h-6 text-gray-700"></i>
  </button>

  <!-- Sidebar -->
  <aside id="sidebar" style="min-height:600px;"
    class="fixed top-0 left-0 w-64 h-full bg-white border-r z-40 transform -translate-x-full lg:translate-x-0 lg:static transition-transform duration-300 flex flex-col items-center py-6 shadow-lg">

    <!-- Bot√≥n cerrar (m√≥vil) -->
    <button id="closeSidebar" class="absolute top-4 right-4 lg:hidden">
      <i data-lucide="x" class="w-6 h-6 text-gray-700"></i>
    </button>

    <!-- Logo -->
    <img src="/images/logo_Amino.svg" alt="Amino Logo" class="w-28 mb-10" />

    <!-- Men√∫ -->
    <nav class="flex flex-col gap-2 w-full px-6">
      <a href="#" class="flex items-center gap-3 px-4 py-2 rounded-xl bg-blue-50 text-blue-700 font-semibold">
        <i data-lucide="home" class="w-5 h-5"></i> Inicio
      </a>
      <a href="#" class="flex items-center gap-3 px-4 py-2 rounded-xl text-gray-600 hover:bg-blue-50 hover:text-blue-700">
        <i data-lucide="globe" class="w-5 h-5"></i> Mi Web
      </a>
      <a href="#" class="flex items-center gap-3 px-4 py-2 rounded-xl text-gray-600 hover:bg-blue-50 hover:text-blue-700">
        <i data-lucide="mail" class="w-5 h-5"></i> Contacto
      </a>
      <a href="#" class="flex items-center gap-3 px-4 py-2 rounded-xl text-gray-600 hover:bg-blue-50 hover:text-blue-700">
        <i data-lucide="settings" class="w-5 h-5"></i> Configuraci√≥n
      </a>
      <!-- Bot√≥n cerrar sesi√≥n -->
<button id="logoutBtn" class="mt-8 flex items-center gap-2 px-4 py-2 rounded-xl bg-[#E18B8B] text-white font-semibold w-[85%] mx-auto hover:bg-[#c76e6e] transition">
  <i data-lucide="log-out" class="w-5 h-5"></i>
  Cerrar sesi√≥n
</button>

    </nav>
  </aside>

    <!-- Overlay (m√≥vil) -->
  <div id="sidebarOverlay" class="fixed inset-0 bg-black bg-opacity-40 z-30 hidden lg:hidden"></div>

<main class="mx-auto relative overflow-hidden" style="width:100%;">


 
  <!-- BOT√ìN PARA AGREGAR SECCI√ìN -->
  <div class="flex justify-center mb-6">
    <button id="addSectionBtn" class="btn-mock flex items-center gap-2 px-6 py-3 text-lg">
      <i data-lucide="plus-circle" class="w-7 h-7"></i>
      Add section
    </button>
  </div>
 
<br> 

  <!-- üßë CARD PERFIL (siempre visible) -->
 <section id="profileCard" class="card-mock text-center mb-6 relative">
  <div class="flex flex-col items-center justify-center">
    <div class="relative mb-2">
      <img id="profilePhoto" src="https://placehold.co/100x100" class="w-24 h-24 rounded-full object-cover border-2 border-[#E5E7EB] bg-[#F3F5F8]" />
      <button id="editProfileBtn" class="absolute bottom-0 right-0 bg-white text-[#7BA9C8] p-[6px] rounded-full shadow border border-gray-300 hover:bg-gray-100 transition duration-200 ease-in-out">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-[14px] h-[14px]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 20h9" />
          <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4 12.5-12.5z" />
        </svg>
      </button>
    </div>
    <h2 id="displayName" class="mt-2 text-[1.6rem] font-bold text-gray-800">Your Name</h2>
    <p id="displayBio" class="text-gray-500 text-lg font-normal">Write a short bio</p>
  </div>
</section>


  <!-- CONTENEDOR PARA LAS SECCIONES DIN√ÅMICAS -->
  <div id="dynamicSections"></div>

  <!-- MENU DE SELECCI√ìN DE SECCI√ìN -->
  <div id="sectionPicker" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-8 transition-transform duration-300 transform translate-y-full z-[70]">
    
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-xl font-bold text-gray-700">Choose a section</h3>
      <button id="closeSectionPicker"><i data-lucide="x" class="w-7 h-7 text-gray-500"></i></button>
    </div>
    <div class="grid grid-cols-4 gap-4">
      <button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="socialCard">
        <i data-lucide="users" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
        Social Links
      </button>
      <button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="linksCard">
        <i data-lucide="link" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
        Custom Links
      </button>
      <button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="productsCard">
        <i data-lucide="shopping-bag" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
        Products
      </button>
      <button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="videosCard">
        <i data-lucide="video" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
        Videos
      </button>
      <button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="testimonialsCard">
        <i data-lucide="quote" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
        Testimonials
      </button>
      <button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="documentsCard">
        <i data-lucide="file-text" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
        Documents
      </button>
      <button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="galleryCard">
        <i data-lucide="image" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
        Gallery
      </button>
      <button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="imageBlockCard">
  <i data-lucide="image" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
  Image Block
</button>

<button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="mapCard">
  <i data-lucide="map-pin" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
  Map
</button>

<!-- dentro de <div class="grid grid-cols-4 gap-4"> de tu sectionPicker -->
<button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="bubbleContact">
  <i data-lucide="message-circle" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
  Contact Bubble
</button>

<!-- Formulario de Contacto -->
<button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="contactFormCard">
  <i data-lucide="edit-2" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
  Contact Form
</button>

<!-- Quiz -->
<button class="chooseSectionBtn card-mock py-6 flex flex-col items-center" data-section="quizCard">
  <i data-lucide="award" class="w-8 h-8 mb-2 text-[#B6D9ED]"></i>
  Quiz
</button>


    </div>

  </div>



  <!-- ====== SECCIONES DIN√ÅMICAS (todas con display:none) ====== -->



  <div id="socialCard" class="card-mock mb-6" style="display:none;">
  <div class="flex justify-between items-center mb-4">
    <span class="font-semibold text-lg text-gray-700">Social Links</span>
    <span></span>
  </div>
  <div id="socialIcons" class="flex gap-3 flex-wrap mt-2 items-center"></div>
  <button id="editSocialsBtn" class="btn-mock w-full mt-2">Edit Socials</button>
</div>


  <div id="linksCard" class="card-mock mb-6" style="display:none;">
    <div class="flex justify-between items-center mb-2">
      <span class="font-semibold text-lg text-gray-700">Custom Links</span>
      <span></span>
    </div>
    <div id="linksList"></div>
    <button id="addLinkBtn" class="btn-mock w-full mt-2">+ Add Link</button>
  </div>

  <div id="productsCard" class="card-mock mb-6" style="display:none;">
    <div class="flex justify-between items-center mb-2">
      <span class="font-semibold text-lg text-gray-700">Products</span>
      <span></span>
    </div>
    <div id="productsList"></div>
    <button id="addProductBtn" class="btn-mock w-full mt-2">+ Add Product</button>
  </div>

  <div id="videosCard" class="card-mock mb-6" style="display:none;">
    <div class="flex justify-between items-center mb-2">
      <span class="font-semibold text-lg text-gray-700">Videos</span>
      <span></span>
    </div>
    <div id="videosList"></div>
    <button id="addVideoBtn" class="btn-mock w-full mt-2">+ Add Video</button>
  </div>

  <div id="testimonialsCard" class="card-mock mb-6" style="display:none;">
    <div class="flex justify-between items-center mb-2">
      <span class="font-semibold text-lg text-gray-700">Testimonials</span>
      <span></span>
    </div>
    <div id="testimonialsList"></div>
    <button id="addTestimonialBtn" class="btn-mock w-full mt-2">+ Add Testimonial</button>
  </div>

  <div id="documentsCard" class="card-mock mb-6" style="display:none;">
    <div class="flex justify-between items-center mb-2">
      <span class="font-semibold text-lg text-gray-700">Documents</span>
      <span></span>
    </div>
    <div id="documentsList"></div>
    <button id="addDocumentBtn" class="btn-mock w-full mt-2">+ Add Document</button>
  </div>

  <div id="galleryCard" class="card-mock mb-6" style="display:none;">
    <div class="flex justify-between items-center mb-2">
      <span class="font-semibold text-lg text-gray-700">Gallery</span>
      <span></span>
    </div>
    <div id="galleryGrid" class="grid grid-cols-3 gap-3 mb-3"></div>
    <button id="addGalleryImgBtn" class="btn-mock w-full mt-2">+ Add Image</button>
  </div>

 <!-- M√ìDULO DE MAPA -->
<div id="mapCard" class="card-mock mb-6" style="display:none; position: relative;">
  <div class="flex justify-between items-center mb-2">
    <span class="font-semibold text-lg text-gray-700">Map</span>
    <!-- El close ya lo a√±ade tu funci√≥n addCloseBtn -->
  </div>
  <div id="mapContainer" class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden"></div>
  <button id="editMapBtn" class="btn-mock w-full mt-2">Edit Map</button>
</div>


<!-- ===== M√ìDULO: Contact Bubble ===== -->
<div id="bubbleContact" class="fixed bottom-6 right-6 z-80 flex flex-col items-end space-y-2">
  <!-- PANEL DE ICONOS (oculto por defecto) -->
  <div id="contactIcons" class="hidden bg-white shadow-super rounded-lg p-2 flex flex-col space-y-2">
    <!-- Los √≠conos se inyectan por JS -->
  </div>
  <!-- BURBUJA PRINCIPAL -->
  <button id="toggleContactBubble" 
          class="w-14 h-14 bg-[#B6D9ED] rounded-full shadow-super text-white flex items-center justify-center">
    <i data-lucide="message-circle" class="w-6 h-6"></i>
  </button>
  <!-- BOT√ìN ‚ÄúEdit‚Äù EN MODO BUILDER -->
  <button id="editContactBubbleBtn" class="btn-mock w-full mt-2">Edit Contact Bubble</button>
</div>


<!-- ===== M√ìDULO: Contact Form ===== -->
<div id="contactFormCard" class="card-mock mb-6" style="display:none; position: relative;">
  <div class="flex justify-between items-center mb-2">
    <span class="font-semibold text-lg text-gray-700">Contact Form</span>
  </div>
  <form id="contactFormFront" class="space-y-4">
    <input id="cfName" type="text" placeholder="Tu Nombre" class="input-mock w-full"/>
    <input id="cfEmail" type="email" placeholder="Tu Email" class="input-mock w-full"/>
    <textarea id="cfMessage" placeholder="Tu Mensaje" class="input-mock w-full resize-none" rows="4"></textarea>
    <button type="submit" class="btn-mock w-full">Enviar</button>
  </form>
  <button id="editContactFormBtn" class="btn-mock w-full mt-2">Edit Contact Form</button>
</div>

<!-- ===== M√ìDULO: Quiz ===== -->
<div id="quizCard" class="card-mock mb-6" style="display:none; position: relative;">
  <div class="flex justify-between items-center mb-2">
    <span class="font-semibold text-lg text-gray-700">Quiz</span>
  </div>
  <div id="quizFront" class="space-y-4">
    <div id="quizQuestion" class="font-medium"></div>
    <div id="quizOptions" class="flex flex-col space-y-2"></div>
    <button id="submitQuizBtn" class="btn-mock w-full">Responder</button>
    <div id="quizResult" class="mt-2 font-semibold"></div>
  </div>
  <button id="editQuizBtn" class="btn-mock w-full mt-2">Edit Quiz</button>
</div>




  <!-- AQU√ç VAN TODOS LOS BOTTOM SHEETS Y VIEWERS DE TODAS LAS SECCIONES (PUEDES PED√çRMELOS UNO A UNO SI QUIERES M√ÅS CORTO, O AV√çSAME PARA PEG√ÅRTELOS AQU√ç EN BLOQUE) -->
<!-- ==== MODAL: Editar Perfil ==== -->
<div id="profileEditor" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Editar perfil</h3>
    <button id="closeSheet"><i data-lucide="x" class="w-6 h-6 text-gray-500"></i></button>
  </div>
  <div class="mb-6">
    <input id="fileInput" type="file" accept="image/*"
      class="block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-[#CCB4E7] file:text-white hover:file:bg-[#B6D9ED]" />
  </div>
  <input id="inputName" type="text" placeholder="Tu Nombre"
    class="input-mock mb-4 w-full" />
  <textarea id="inputBio" placeholder="Escribe una breve bio"
    class="input-mock mb-6 w-full resize-none"></textarea>
  <button id="saveBtn" class="btn-mock w-full">Guardar</button>
</div>

<!-- ==== MODAL: Redes Sociales ==== -->
<div id="socialEditor" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Editar redes</h3>
    <button id="closeSocialEditor"><i data-lucide="x" class="w-6 h-6 text-gray-500"></i></button>
  </div>
  <form class="space-y-4">
    <input id="instagramInput" type="url" placeholder="Instagram" class="input-mock w-full" />
    <input id="whatsappInput" type="tel" placeholder="WhatsApp" class="input-mock w-full" />
    <input id="linkedinInput" type="url" placeholder="LinkedIn" class="input-mock w-full" />
    <input id="tiktokInput" type="url" placeholder="TikTok" class="input-mock w-full" />
    <input id="twitterInput" type="url" placeholder="X / Twitter" class="input-mock w-full" />
    <button id="saveSocialsBtn" type="button" class="btn-mock w-full">Guardar</button>
  </form>
</div>


<!-- ==== MODAL: Custom Links ==== -->
<div id="linkEditor" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold" id="linkEditorTitle">Add Link</h3>
    <button id="closeLinkEditor"><i data-lucide="x" class="w-6 h-6 text-gray-500"></i></button>
  </div>
  <input id="linkTitleInput" type="text" placeholder="Title" class="input-mock mb-4 w-full" />
  <input id="linkUrlInput" type="url" placeholder="https://your-link.com" class="input-mock mb-4 w-full" />
  <button id="saveLinkBtn" class="btn-mock w-full">Guardar</button>
</div>

<!-- ==== MODAL: Products ==== -->
<div id="productEditor" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold" id="productEditorTitle">Add Product</h3>
    <button id="closeProductEditor"><i data-lucide="x" class="w-6 h-6 text-gray-500"></i></button>
  </div>
  <input id="productTitleInput" type="text" placeholder="Product name" class="input-mock mb-4 w-full" />
  <input id="productImgInput" type="file" accept="image/*" class="block w-full text-sm text-gray-600 mb-4" />
  <input id="productPriceInput" type="number" placeholder="Price" class="input-mock mb-4 w-full" />
  <textarea id="productDescInput" placeholder="Description" class="input-mock mb-6 w-full resize-none"></textarea>
  <button id="saveProductBtn" class="btn-mock w-full">Guardar</button>
</div>

<!-- ==== MODAL: Videos ==== -->
<div id="videoEditor" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold" id="videoEditorTitle">Add Video</h3>
    <button id="closeVideoEditor"><i data-lucide="x" class="w-6 h-6 text-gray-500"></i></button>
  </div>
  <input id="videoTitleInput" type="text" placeholder="Title" class="input-mock mb-4 w-full" />
  <input id="videoUrlInput" type="url" placeholder="YouTube/Vimeo link" class="input-mock mb-4 w-full" />
  <button id="saveVideoBtn" class="btn-mock w-full">Guardar</button>
</div>

<!-- ==== MODAL: Testimonials ==== -->
<div id="testimonialEditor" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold" id="testimonialEditorTitle">Add Testimonial</h3>
    <button id="closeTestimonialEditor"><i data-lucide="x" class="w-6 h-6 text-gray-500"></i></button>
  </div>
  <input id="testimonialNameInput" type="text" placeholder="Name" class="input-mock mb-4 w-full" />
  <textarea id="testimonialTextInput" placeholder="Testimonial" class="input-mock mb-6 w-full resize-none"></textarea>
  <button id="saveTestimonialBtn" class="btn-mock w-full">Guardar</button>
</div>

<!-- ==== MODAL: Documents ==== -->
<div id="documentEditor" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold" id="documentEditorTitle">Add Document</h3>
    <button id="closeDocumentEditor"><i data-lucide="x" class="w-6 h-6 text-gray-500"></i></button>
  </div>
  <input id="documentNameInput" type="text" placeholder="Document name" class="input-mock mb-4 w-full" />
  <input id="documentFileInput" type="file" class="block w-full text-sm text-gray-600 mb-4" />
  <div id="documentFilePreview" class="mb-4 text-sm text-gray-500"></div>
  <button id="saveDocumentBtn" class="btn-mock w-full">Guardar</button>
</div>
<div id="docViewer" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-bold text-gray-700" id="docViewerTitle">Preview</h3>
    <button id="closeDocViewer"><i data-lucide="x" class="w-7 h-7 text-gray-500"></i></button>
  </div>
  <div id="docViewerContent" class="rounded-xl overflow-auto" style="max-height: 60vh;"></div>
</div>

<!-- ==== MODAL: Galer√≠a ==== -->
<div id="galleryImgEditor" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-xl font-bold text-gray-700" id="galleryEditorTitle">Add Image</h3>
    <button id="closeGalleryImgEditor"><i data-lucide="x" class="w-7 h-7 text-gray-500"></i></button>
  </div>
  <input id="galleryImgInput" type="file" accept="image/*" class="block w-full text-sm text-gray-600 mb-4" />
  <div class="flex justify-center mb-4">
    <img id="galleryImgPreview" src="" alt="Preview" class="w-28 h-28 rounded-xl object-cover hidden" />
  </div>
  <input id="galleryImgTitle" type="text" placeholder="Image title (optional)" class="input-mock mb-6 w-full" />
  <button id="saveGalleryImgBtn" class="btn-mock w-full">Guardar</button>
</div>
<div id="galleryViewer" class="absolute bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-bold text-gray-700" id="galleryViewerTitle">Image</h3>
    <button id="closeGalleryViewer"><i data-lucide="x" class="w-7 h-7 text-gray-500"></i></button>
  </div>
  <div id="galleryViewerContent" class="rounded-xl overflow-auto flex justify-center items-center" style="max-height: 60vh;"></div>
</div>

<!-- Bloque imagen editable -->
<div id="imageBlockCard" class="card-mock mb-6" style="display:none; position: relative;">
  <div class="flex flex-col items-center">
    <img id="imageBlockImg" src="https://placehold.co/400x400" alt="Image Block" class="w-full aspect-square rounded-3xl object-cover mb-4" />
    <h3 id="imageBlockTitle" class="text-center text-xl font-semibold mb-2">T√≠tulo aqu√≠</h3>
    <p id="imageBlockText" class="text-center text-gray-600 px-4">Texto descriptivo o informativo debajo del t√≠tulo.</p>
  </div>
  <button id="editImageBlockBtn" class="closeSectionBtn" title="Editar bloque">
    <i data-lucide="edit" class="w-6 h-6"></i>
  </button>
  <button class="closeSectionBtn" style="right: 3rem;" title="Quitar bloque" id="removeImageBlockBtn">
    <i data-lucide="x" class="w-6 h-6"></i>
  </button>
</div>

<!-- Bloque Mapa editable -->

<div id="mapEditor" class="modal-sheet" data-modal="mapEditor">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Editar Mapa</h3>
    <button data-modal-close="mapEditor">
      <i data-lucide="x" class="w-6 h-6 text-gray-500"></i>
    </button>
  </div>
  <input id="mapAddressInput" type="text"
         placeholder="Escribe direcci√≥n o lugar..."
         class="input-mock mb-4 w-full"/>
  <button id="saveMapBtn" class="btn-mock w-full">Guardar</button>
</div>


<!-- Bloque burbuja editable -->


<div id="contactBubbleEditor" class="modal-sheet" data-modal="contactBubbleEditor">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Configurar Contact Bubble</h3>
    <button data-modal-close="contactBubbleEditor">
      <i data-lucide="x" class="w-6 h-6 text-gray-500"></i>
    </button>
  </div>
  <form class="space-y-4">
    <div>
      <label class="inline-flex items-center">
        <input type="checkbox" id="optEmail" class="mr-2"/> Email
      </label>
      <input id="inputEmail" type="email" placeholder="tu@correo.com"
             class="input-mock w-full mt-1" />
    </div>
    <div>
      <label class="inline-flex items-center">
        <input type="checkbox" id="optWhatsApp" class="mr-2"/> WhatsApp
      </label>
      <input id="inputWhatsApp" type="tel" placeholder="+1234567890"
             class="input-mock w-full mt-1" />
    </div>
    <div>
      <label class="inline-flex items-center">
        <input type="checkbox" id="optPhone" class="mr-2"/> Tel√©fono
      </label>
      <input id="inputPhone" type="tel" placeholder="+1234567890"
             class="input-mock w-full mt-1" />
    </div>
  </form>
  <button id="saveContactBubbleBtn" class="btn-mock w-full mt-4">Guardar</button>
</div>



<!-- Builder: Contact Form -->
<div id="contactFormEditor" class="modal-sheet" data-modal="contactFormEditor">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Configurar Contact Form</h3>
    <button data-modal-close="contactFormEditor"><i data-lucide="x" class="w-6 h-6"></i></button>
  </div>
  <input id="cfOwnerEmail" type="email" placeholder="Email receptor" class="input-mock w-full mb-4"/>
  <button id="saveContactFormBtn" class="btn-mock w-full">Guardar</button>
</div>

<!-- Builder: Quiz -->
<div id="quizEditor" class="modal-sheet" data-modal="quizEditor">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Configurar Quiz</h3>
    <button data-modal-close="quizEditor"><i data-lucide="x" class="w-6 h-6"></i></button>
  </div>
  <div class="space-y-3">
    <input id="qeQuestion" type="text" placeholder="Pregunta" class="input-mock w-full"/>
    <input id="qeOpt1" type="text" placeholder="Opci√≥n 1" class="input-mock w-full"/>
    <input id="qeOpt2" type="text" placeholder="Opci√≥n 2" class="input-mock w-full"/>
    <input id="qeOpt3" type="text" placeholder="Opci√≥n 3" class="input-mock w-full"/>
    <input id="qeOpt4" type="text" placeholder="Opci√≥n 4" class="input-mock w-full"/>
    <label class="font-medium">Respuesta Correcta:</label>
    <select id="qeAnswer" class="input-mock w-full">
      <option value="1">Opci√≥n 1</option>
      <option value="2">Opci√≥n 2</option>
      <option value="3">Opci√≥n 3</option>
      <option value="4">Opci√≥n 4</option>
    </select>
  </div>
  <button id="saveQuizBtn" class="btn-mock w-full mt-4">Guardar</button>
</div>


  <!-- Para no exceder el l√≠mite de caracteres aqu√≠, dime si los quieres TODOS aqu√≠ pegados, o una secci√≥n a la vez (sociales, links, productos, video, galer√≠a, documentos, testimonios y sus scripts completos, uno a uno o juntos). -->

</main>

<script>
/* Aqu√≠ tienes el script de gesti√≥n de secciones din√°micas.
   Para no superar el l√≠mite de caracteres, dime si quieres
   que te pegue tambi√©n TODO el script funcional de cada m√≥dulo
   (perfil, sociales, links, productos, videos, galer√≠a, testimonios, documentos)
   aqu√≠ abajo. As√≠ t√∫ solo copias, pegas y lanzas.
*/

document.addEventListener('DOMContentLoaded', () => {
  lucide.createIcons();

  // --- SECCIONES DIN√ÅMICAS ---
  const dynamicSections = document.getElementById('dynamicSections');
  const sectionPicker = document.getElementById('sectionPicker');
  const addSectionBtn = document.getElementById('addSectionBtn');
  const closeSectionPicker = document.getElementById('closeSectionPicker');
  const chooseSectionBtns = document.querySelectorAll('.chooseSectionBtn');

  // IDs de secciones disponibles (ajusta seg√∫n tus IDs)







  // Inicialmente oculta todas las secciones (menos perfil)
  sections.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = "none";
  });

  // Mostrar picker
  addSectionBtn.addEventListener('click', () => {
    sectionPicker.classList.remove('translate-y-full');
    lucide.createIcons();
  });

  // Cerrar picker
  closeSectionPicker.addEventListener('click', () => {
    sectionPicker.classList.add('translate-y-full');
  });

 

  // Agregar bot√≥n "X" para quitar la secci√≥n (solo si no existe)
  function addCloseBtn(section) {
    if (!section.querySelector('.closeSectionBtn')) {
      const closeBtn = document.createElement('button');
      closeBtn.className = "closeSectionBtn";
      closeBtn.innerHTML = `<i data-lucide="x" class="w-6 h-6"></i>`;
      closeBtn.title = "Remove section";
      closeBtn.addEventListener('click', () => {
        section.style.display = "none";
        // Tambi√©n lo puedes remover del DOM con .remove() si prefieres.
      });
      section.appendChild(closeBtn);
      lucide.createIcons();
    }
  }

  // Si recargas y alguna secci√≥n ya est√° agregada, pon el bot√≥n X de una vez
  sections.forEach(id => {
    const section = document.getElementById(id);
    if (section && dynamicSections.contains(section)) addCloseBtn(section);
  });

  // Aqu√≠ van los scripts FUNCIONALES de cada secci√≥n...
  // Dime si los quieres completos aqu√≠ en el siguiente mensaje, Moi.
});

document.addEventListener('DOMContentLoaded', () => {
  lucide.createIcons();

  // --- GESTI√ìN DE SECCIONES DIN√ÅMICAS ---
  const dynamicSections = document.getElementById('dynamicSections');
  const sectionPicker = document.getElementById('sectionPicker');
  const addSectionBtn = document.getElementById('addSectionBtn');
  const closeSectionPicker = document.getElementById('closeSectionPicker');
  const chooseSectionBtns = document.querySelectorAll('.chooseSectionBtn');

const sections = [
  'socialCard','linksCard','productsCard',
  'videosCard','testimonialsCard','documentsCard',
  'galleryCard','imageBlockCard','mapCard' ,'bubbleContact','contactFormCard','quizCard'
];


  // Ocultar todas las secciones (menos perfil)
  sections.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = "none";
  });

  addSectionBtn.addEventListener('click', () => {
    sectionPicker.classList.remove('translate-y-full');
    lucide.createIcons();
  });
  closeSectionPicker.addEventListener('click', () => {
    sectionPicker.classList.add('translate-y-full');
  });
  chooseSectionBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.dataset.section;
      const section = document.getElementById(id);
      if (section && !dynamicSections.contains(section)) {
        section.style.display = "";
        dynamicSections.appendChild(section);
        addCloseBtn(section);
      }
      sectionPicker.classList.add('translate-y-full');
    });
  });
  function addCloseBtn(section) {
    if (!section.querySelector('.closeSectionBtn')) {
      const closeBtn = document.createElement('button');
      closeBtn.className = "closeSectionBtn";
      closeBtn.innerHTML = `<i data-lucide="x" class="w-6 h-6"></i>`;
      closeBtn.title = "Remove section";
      closeBtn.addEventListener('click', () => {
        section.style.display = "none";
      });
      section.appendChild(closeBtn);
      lucide.createIcons();
    }
  }
  sections.forEach(id => {
    const section = document.getElementById(id);
    if (section && dynamicSections.contains(section)) addCloseBtn(section);
  });

  // --- PERFIL ---
  const editProfileBtn = document.getElementById('editProfileBtn');
  const sheet = document.getElementById('profileEditor');
  const closeBtn = document.getElementById('closeSheet');
  const saveBtn = document.getElementById('saveBtn');
  const fileInput = document.getElementById('fileInput');
  const profilePhoto = document.getElementById('profilePhoto');
  const inputName = document.getElementById('inputName');
  const inputBio = document.getElementById('inputBio');
  const displayName = document.getElementById('displayName');
  const displayBio = document.getElementById('displayBio');
  let tempPhotoURL = "";

  editProfileBtn.addEventListener('click', () => {
    sheet.classList.remove('translate-y-full');
    inputName.value = displayName.textContent;
    inputBio.value = displayBio.textContent;
  });
  closeBtn.addEventListener('click', () => {
    sheet.classList.add('translate-y-full');
    tempPhotoURL = "";
  });
  fileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = function (event) {
        tempPhotoURL = event.target.result;
      };
      reader.readAsDataURL(file);
    }
  });
  saveBtn.addEventListener('click', () => {
    displayName.textContent = inputName.value || 'Your Name';
    displayBio.textContent = inputBio.value || 'Write a short bio';
    if (tempPhotoURL) profilePhoto.src = tempPhotoURL;
    closeBtn.click();
  });

  // --- REDES SOCIALES ---
const editSocialsBtn = document.getElementById('editSocialsBtn');
const socialEditor = document.getElementById('socialEditor');
const closeSocialEditor = document.getElementById('closeSocialEditor');
const saveSocialsBtn = document.getElementById('saveSocialsBtn');
const socialIcons = document.getElementById('socialIcons');
const instagramInput = document.getElementById('instagramInput');
const whatsappInput = document.getElementById('whatsappInput');
const linkedinInput = document.getElementById('linkedinInput');
const tiktokInput = document.getElementById('tiktokInput');
const twitterInput = document.getElementById('twitterInput');

editSocialsBtn.addEventListener('click', () => {
  socialEditor.classList.remove('translate-y-full');
});
closeSocialEditor.addEventListener('click', () => {
  socialEditor.classList.add('translate-y-full');
});
saveSocialsBtn.addEventListener('click', () => {
  const redes = [
    { input: instagramInput, icon: 'instagram', color: '#E1306C' },
    { input: whatsappInput, icon: 'phone', color: '#25D366' },
    { input: linkedinInput, icon: 'linkedin', color: '#0077B5' },
    { input: tiktokInput, icon: 'music', color: '#000000' },
    { input: twitterInput, icon: 'twitter', color: '#1DA1F2' }
  ];

  socialIcons.innerHTML = '';

  redes.forEach(({ input, icon, color }) => {
    if (input.value.trim() !== '') {
      const link = document.createElement('a');
      link.href = input.value;
      link.target = '_blank';
      link.innerHTML = `
        <span class="flex items-center justify-center w-9 h-9 rounded-full bg-gray-100 hover:scale-110 transition-transform">
          <i data-lucide="${icon}" class="w-5 h-5" style="color:${color}"></i>
        </span>`;
      socialIcons.appendChild(link);
    }
  });

  lucide.createIcons();
  closeSocialEditor.click();
});


  // --- LINKS PERSONALIZADOS ---
  let links = [];
  const addLinkBtn = document.getElementById('addLinkBtn');
  const linksList = document.getElementById('linksList');
  const linkEditor = document.getElementById('linkEditor');
  const closeLinkEditor = document.getElementById('closeLinkEditor');
  const saveLinkBtn = document.getElementById('saveLinkBtn');
  const linkTitleInput = document.getElementById('linkTitleInput');
  const linkUrlInput = document.getElementById('linkUrlInput');
  const linkEditorTitle = document.getElementById('linkEditorTitle');
  let editingLinkIndex = null;
  function renderLinks() {
    linksList.innerHTML = '';
    links.forEach((link, i) => {
      const row = document.createElement('div');
      row.className = "flex items-center gap-3 mb-3 border border-[#E5E7EB] rounded-lg px-4 py-2";
      row.innerHTML = `
        <div class="flex-1 truncate">
          <a href="${link.url}" target="_blank" class="text-[#7BA9C8] font-semibold underline">${link.title}</a>
        </div>
        <button class="editLinkBtn text-xs px-2 py-1 rounded hover:bg-gray-100" data-index="${i}">Edit</button>
        <button class="deleteLinkBtn text-xs px-2 py-1 rounded hover:bg-gray-100 text-[#E18B8B]" data-index="${i}">Delete</button>
      `;
      linksList.appendChild(row);
    });
  }
  addLinkBtn.addEventListener('click', () => {
    linkEditorTitle.textContent = "Add Link";
    linkTitleInput.value = '';
    linkUrlInput.value = '';
    editingLinkIndex = null;
    linkEditor.classList.remove('translate-y-full');
  });
  closeLinkEditor.addEventListener('click', () => {
    linkEditor.classList.add('translate-y-full');
  });
  saveLinkBtn.addEventListener('click', () => {
    const title = linkTitleInput.value.trim();
    const url = linkUrlInput.value.trim();
    if (!title || !url) return;
    if (editingLinkIndex !== null) {
      links[editingLinkIndex] = { title, url };
    } else {
      links.push({ title, url });
    }
    renderLinks();
    linkEditor.classList.add('translate-y-full');
  });
  linksList.addEventListener('click', (e) => {
    if (e.target.classList.contains('editLinkBtn')) {
      const i = e.target.dataset.index;
      editingLinkIndex = Number(i);
      linkEditorTitle.textContent = "Edit Link";
      linkTitleInput.value = links[i].title;
      linkUrlInput.value = links[i].url;
      linkEditor.classList.remove('translate-y-full');
    } else if (e.target.classList.contains('deleteLinkBtn')) {
      const i = e.target.dataset.index;
      links.splice(i, 1);
      renderLinks();
    }
  });
  renderLinks();

  // --- PRODUCTOS ---
  let products = [];
  const addProductBtn = document.getElementById('addProductBtn');
  const productsList = document.getElementById('productsList');
  const productEditor = document.getElementById('productEditor');
  const closeProductEditor = document.getElementById('closeProductEditor');
  const saveProductBtn = document.getElementById('saveProductBtn');
  const productTitleInput = document.getElementById('productTitleInput');
  const productImgInput = document.getElementById('productImgInput');
  const productPriceInput = document.getElementById('productPriceInput');
  const productDescInput = document.getElementById('productDescInput');
  const productEditorTitle = document.getElementById('productEditorTitle');
  let editingProductIndex = null;
  let tempProductImg = "";
  function renderProducts() {
    productsList.innerHTML = '';
    products.forEach((prod, i) => {
      const row = document.createElement('div');
      row.className = "flex items-center gap-4 border border-[#E5E7EB] rounded-lg px-3 py-2 mb-3";
      row.innerHTML = `
        <img src="${prod.img}" class="w-12 h-12 rounded-md object-cover bg-gray-100 border" />
        <div class="flex-1">
          <div class="font-semibold">${prod.title}</div>
          <div class="text-sm text-gray-500">${prod.desc}</div>
          <div class="text-xs text-[#7BA9C8] font-semibold">$${prod.price}</div>
        </div>
        <button class="editProductBtn text-xs px-2 py-1 rounded hover:bg-gray-100" data-index="${i}">Edit</button>
        <button class="deleteProductBtn text-xs px-2 py-1 rounded hover:bg-gray-100 text-[#E18B8B]" data-index="${i}">Delete</button>
      `;
      productsList.appendChild(row);
    });
  }
  addProductBtn.addEventListener('click', () => {
    productEditorTitle.textContent = "Add Product";
    productTitleInput.value = '';
    productImgInput.value = '';
    productPriceInput.value = '';
    productDescInput.value = '';
    editingProductIndex = null;
    tempProductImg = '';
    productEditor.classList.remove('translate-y-full');
  });
  closeProductEditor.addEventListener('click', () => {
    productEditor.classList.add('translate-y-full');
  });
  productImgInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = function (event) {
        tempProductImg = event.target.result;
      };
      reader.readAsDataURL(file);
    }
  });
  saveProductBtn.addEventListener('click', () => {
    const title = productTitleInput.value.trim();
    const price = productPriceInput.value.trim();
    const desc = productDescInput.value.trim();
    const img = tempProductImg || "https://placehold.co/48x48";
    if (!title || !price) return;
    if (editingProductIndex !== null) {
      products[editingProductIndex] = { title, price, desc, img: img || products[editingProductIndex].img };
    } else {
      products.push({ title, price, desc, img });
    }
    renderProducts();
    productEditor.classList.add('translate-y-full');
  });
  productsList.addEventListener('click', (e) => {
    if (e.target.classList.contains('editProductBtn')) {
      const i = e.target.dataset.index;
      editingProductIndex = Number(i);
      productEditorTitle.textContent = "Edit Product";
      productTitleInput.value = products[i].title;
      productPriceInput.value = products[i].price;
      productDescInput.value = products[i].desc;
      tempProductImg = products[i].img;
      productEditor.classList.remove('translate-y-full');
    } else if (e.target.classList.contains('deleteProductBtn')) {
      const i = e.target.dataset.index;
      products.splice(i, 1);
      renderProducts();
    }
  });
  renderProducts();

  // --- VIDEOS ---
  let videos = [];
  const addVideoBtn = document.getElementById('addVideoBtn');
  const videosList = document.getElementById('videosList');
  const videoEditor = document.getElementById('videoEditor');
  const closeVideoEditor = document.getElementById('closeVideoEditor');
  const saveVideoBtn = document.getElementById('saveVideoBtn');
  const videoTitleInput = document.getElementById('videoTitleInput');
  const videoUrlInput = document.getElementById('videoUrlInput');
  const videoEditorTitle = document.getElementById('videoEditorTitle');
  let editingVideoIndex = null;
  function renderVideos() {
    videosList.innerHTML = '';
    videos.forEach((video, i) => {
      const embed = getVideoEmbed(video.url);
      const row = document.createElement('div');
      row.className = "mb-3 border border-[#E5E7EB] rounded-lg px-3 py-2";
      row.innerHTML = `
        <div class="font-semibold">${video.title}</div>
        <div class="mt-1">${embed}</div>
        <button class="editVideoBtn text-xs px-2 py-1 rounded hover:bg-gray-100" data-index="${i}">Edit</button>
        <button class="deleteVideoBtn text-xs px-2 py-1 rounded hover:bg-gray-100 text-[#E18B8B]" data-index="${i}">Delete</button>
      `;
      videosList.appendChild(row);
    });
  }
  function getVideoEmbed(url) {
    if (/youtube\.com|youtu\.be/.test(url)) {
      const id = url.match(/(?:youtu\.be\/|v=)([\w-]+)/)?.[1];
      if (!id) return '';
      return `<iframe width="100%" height="160" src="https://www.youtube.com/embed/${id}" frameborder="0" allowfullscreen class="rounded-xl"></iframe>`;
    }
    if (/vimeo\.com/.test(url)) {
      const id = url.split('/').pop();
      return `<iframe width="100%" height="160" src="https://player.vimeo.com/video/${id}" frameborder="0" allowfullscreen class="rounded-xl"></iframe>`;
    }
    return `<a href="${url}" target="_blank" class="text-[#7BA9C8] underline">Ver video</a>`;
  }
  addVideoBtn.addEventListener('click', () => {
    videoEditorTitle.textContent = "Add Video";
    videoTitleInput.value = '';
    videoUrlInput.value = '';
    editingVideoIndex = null;
    videoEditor.classList.remove('translate-y-full');
  });
  closeVideoEditor.addEventListener('click', () => {
    videoEditor.classList.add('translate-y-full');
  });
  saveVideoBtn.addEventListener('click', () => {
    const title = videoTitleInput.value.trim();
    const url = videoUrlInput.value.trim();
    if (!title || !url) return;
    if (editingVideoIndex !== null) {
      videos[editingVideoIndex] = { title, url };
    } else {
      videos.push({ title, url });
    }
    renderVideos();
    videoEditor.classList.add('translate-y-full');
  });
  videosList.addEventListener('click', (e) => {
    if (e.target.classList.contains('editVideoBtn')) {
      const i = e.target.dataset.index;
      editingVideoIndex = Number(i);
      videoEditorTitle.textContent = "Edit Video";
      videoTitleInput.value = videos[i].title;
      videoUrlInput.value = videos[i].url;
      videoEditor.classList.remove('translate-y-full');
    } else if (e.target.classList.contains('deleteVideoBtn')) {
      const i = e.target.dataset.index;
      videos.splice(i, 1);
      renderVideos();
    }
  });
  renderVideos();

  // --- TESTIMONIOS ---
  let testimonials = [];
  const addTestimonialBtn = document.getElementById('addTestimonialBtn');
  const testimonialsList = document.getElementById('testimonialsList');
  const testimonialEditor = document.getElementById('testimonialEditor');
  const closeTestimonialEditor = document.getElementById('closeTestimonialEditor');
  const saveTestimonialBtn = document.getElementById('saveTestimonialBtn');
  const testimonialNameInput = document.getElementById('testimonialNameInput');
  const testimonialTextInput = document.getElementById('testimonialTextInput');
  const testimonialEditorTitle = document.getElementById('testimonialEditorTitle');
  let editingTestimonialIndex = null;
  function renderTestimonials() {
    testimonialsList.innerHTML = '';
    testimonials.forEach((t, i) => {
      const row = document.createElement('div');
      row.className = "flex items-start gap-3 mb-3 border border-[#E5E7EB] rounded-lg px-4 py-3";
      row.innerHTML = `
        <i data-lucide="quote" class="w-7 h-7 mt-1 text-[#B6D9ED]"></i>
        <div class="flex-1">
          <div class="font-semibold">${t.name}</div>
          <div class="text-gray-500 text-sm">${t.text}</div>
        </div>
        <button class="editTestimonialBtn text-xs px-2 py-1 rounded hover:bg-gray-100" data-index="${i}">Edit</button>
        <button class="deleteTestimonialBtn text-xs px-2 py-1 rounded hover:bg-gray-100 text-[#E18B8B]" data-index="${i}">Delete</button>
      `;
      testimonialsList.appendChild(row);
    });
    lucide.createIcons();
  }
  addTestimonialBtn.addEventListener('click', () => {
    testimonialEditorTitle.textContent = "Add Testimonial";
    testimonialNameInput.value = '';
    testimonialTextInput.value = '';
    editingTestimonialIndex = null;
    testimonialEditor.classList.remove('translate-y-full');
  });
  closeTestimonialEditor.addEventListener('click', () => {
    testimonialEditor.classList.add('translate-y-full');
  });
  saveTestimonialBtn.addEventListener('click', () => {
    const name = testimonialNameInput.value.trim();
    const text = testimonialTextInput.value.trim();
    if (!name || !text) return;
    if (editingTestimonialIndex !== null) {
      testimonials[editingTestimonialIndex] = { name, text };
    } else {
      testimonials.push({ name, text });
    }
    renderTestimonials();
    testimonialEditor.classList.add('translate-y-full');
  });
  testimonialsList.addEventListener('click', (e) => {
    if (e.target.classList.contains('editTestimonialBtn')) {
      const i = e.target.dataset.index;
      editingTestimonialIndex = Number(i);
      testimonialEditorTitle.textContent = "Edit Testimonial";
      testimonialNameInput.value = testimonials[i].name;
      testimonialTextInput.value = testimonials[i].text;
      testimonialEditor.classList.remove('translate-y-full');
    } else if (e.target.classList.contains('deleteTestimonialBtn')) {
      const i = e.target.dataset.index;
      testimonials.splice(i, 1);
      renderTestimonials();
    }
  });
  renderTestimonials();

  // --- DOCUMENTOS ---
  let documents = [];
  const addDocumentBtn = document.getElementById('addDocumentBtn');
  const documentsList = document.getElementById('documentsList');
  const documentEditor = document.getElementById('documentEditor');
  const closeDocumentEditor = document.getElementById('closeDocumentEditor');
  const saveDocumentBtn = document.getElementById('saveDocumentBtn');
  const documentNameInput = document.getElementById('documentNameInput');
  const documentFileInput = document.getElementById('documentFileInput');
  const documentFilePreview = document.getElementById('documentFilePreview');
  const docViewer = document.getElementById('docViewer');
  const closeDocViewer = document.getElementById('closeDocViewer');
  const docViewerTitle = document.getElementById('docViewerTitle');
  const docViewerContent = document.getElementById('docViewerContent');
  const documentEditorTitle = document.getElementById('documentEditorTitle');
  let editingDocumentIndex = null;
  let tempDocURL = "", tempDocName = "";
  function renderDocuments() {
    documentsList.innerHTML = '';
    documents.forEach((doc, i) => {
      const row = document.createElement('div');
      row.className = "flex items-center gap-3 mb-3 border border-[#E5E7EB] rounded-lg px-4 py-2";
      row.innerHTML = `
        <div class="flex-1 truncate">
          <span class="font-semibold text-[#B6D9ED]">${doc.name}</span>
        </div>
        <button class="viewDocBtn text-xs px-2 py-1 rounded hover:bg-gray-100" data-index="${i}">View</button>
        <button class="editDocumentBtn text-xs px-2 py-1 rounded hover:bg-gray-100" data-index="${i}">Edit</button>
        <button class="deleteDocumentBtn text-xs px-2 py-1 rounded hover:bg-gray-100 text-[#E18B8B]" data-index="${i}">Delete</button>
      `;
      documentsList.appendChild(row);
    });
  }
  addDocumentBtn.addEventListener('click', () => {
    documentEditorTitle.textContent = "Add Document";
    documentNameInput.value = '';
    documentFileInput.value = '';
    documentFilePreview.textContent = '';
    editingDocumentIndex = null;
    tempDocURL = ""; tempDocName = "";
    documentEditor.classList.remove('translate-y-full');
  });
  closeDocumentEditor.addEventListener('click', () => {
    documentEditor.classList.add('translate-y-full');
  });
  documentFileInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file) {
      tempDocName = file.name;
      const reader = new FileReader();
      reader.onload = function (event) {
        tempDocURL = event.target.result;
        documentFilePreview.textContent = `Ready: ${file.name}`;
      };
      reader.readAsDataURL(file);
    }
  });
  saveDocumentBtn.addEventListener('click', () => {
    const name = documentNameInput.value.trim() || tempDocName;
    if (!name || !tempDocURL) return;
    if (editingDocumentIndex !== null) {
      documents[editingDocumentIndex] = { name, url: tempDocURL };
    } else {
      documents.push({ name, url: tempDocURL });
    }
    renderDocuments();
    documentEditor.classList.add('translate-y-full');
  });
  documentsList.addEventListener('click', (e) => {
    if (e.target.classList.contains('editDocumentBtn')) {
      const i = e.target.dataset.index;
      editingDocumentIndex = Number(i);
      documentEditorTitle.textContent = "Edit Document";
      documentNameInput.value = documents[i].name;
      tempDocURL = documents[i].url;
      documentEditor.classList.remove('translate-y-full');
    } else if (e.target.classList.contains('deleteDocumentBtn')) {
      const i = e.target.dataset.index;
      documents.splice(i, 1);
      renderDocuments();
    } else if (e.target.classList.contains('viewDocBtn')) {
      const i = e.target.dataset.index;
      const doc = documents[i];
      docViewerTitle.textContent = doc.name;
      if (doc.url.endsWith('.pdf')) {
        docViewerContent.innerHTML = `<embed src="${doc.url}" type="application/pdf" width="100%" height="400px"/>`;
      } else {
        docViewerContent.innerHTML = `<a href="${doc.url}" target="_blank" class="text-blue-500 underline">Descargar</a>`;
      }
      docViewer.classList.remove('translate-y-full');
    }
  });
  closeDocViewer.addEventListener('click', () => {
    docViewer.classList.add('translate-y-full');
    docViewerContent.innerHTML = '';
  });
  renderDocuments();

  // --- GALER√çA ---
  let gallery = [];
  const addGalleryImgBtn = document.getElementById('addGalleryImgBtn');
  const galleryGrid = document.getElementById('galleryGrid');
  const galleryImgEditor = document.getElementById('galleryImgEditor');
  const closeGalleryImgEditor = document.getElementById('closeGalleryImgEditor');
  const saveGalleryImgBtn = document.getElementById('saveGalleryImgBtn');
  const galleryImgInput = document.getElementById('galleryImgInput');
  const galleryImgPreview = document.getElementById('galleryImgPreview');
  const galleryImgTitle = document.getElementById('galleryImgTitle');
  const galleryEditorTitle = document.getElementById('galleryEditorTitle');
  const galleryViewer = document.getElementById('galleryViewer');
  const galleryViewerTitle = document.getElementById('galleryViewerTitle');
  const galleryViewerContent = document.getElementById('galleryViewerContent');
  const closeGalleryViewer = document.getElementById('closeGalleryViewer');
  let editingGalleryIndex = null, tempGalleryImg = "";

  function renderGallery() {
    galleryGrid.innerHTML = '';
    gallery.forEach((img, i) => {
      const imgDiv = document.createElement('div');
      imgDiv.className = "relative group";
      imgDiv.innerHTML = `
        <img src="${img.src}" class="w-20 h-20 rounded-lg object-cover border cursor-pointer" data-index="${i}" />
        <button class="editGalleryBtn absolute top-1 left-1 text-xs bg-white/70 rounded p-1 hidden group-hover:block" data-index="${i}"><i data-lucide="pencil" class="w-4 h-4"></i></button>
        <button class="deleteGalleryBtn absolute top-1 right-1 text-xs bg-white/70 rounded p-1 hidden group-hover:block text-[#E18B8B]" data-index="${i}"><i data-lucide="x" class="w-4 h-4"></i></button>
      `;
      galleryGrid.appendChild(imgDiv);
    });
    lucide.createIcons();
  }
  addGalleryImgBtn.addEventListener('click', () => {
    galleryEditorTitle.textContent = "Add Image";
    galleryImgInput.value = '';
    galleryImgTitle.value = '';
    galleryImgPreview.src = '';
    galleryImgPreview.classList.add('hidden');
    editingGalleryIndex = null;
    tempGalleryImg = '';
    galleryImgEditor.classList.remove('translate-y-full');
  });
  closeGalleryImgEditor.addEventListener('click', () => {
    galleryImgEditor.classList.add('translate-y-full');
  });
  galleryImgInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = function (event) {
        tempGalleryImg = event.target.result;
        galleryImgPreview.src = tempGalleryImg;
        galleryImgPreview.classList.remove('hidden');
      };
      reader.readAsDataURL(file);
    }
  });
  saveGalleryImgBtn.addEventListener('click', () => {
    const title = galleryImgTitle.value.trim();
    const src = tempGalleryImg;
    if (!src) return;
    if (editingGalleryIndex !== null) {
      gallery[editingGalleryIndex] = { src, title };
    } else {
      gallery.push({ src, title });
    }
    renderGallery();
    galleryImgEditor.classList.add('translate-y-full');
  });
  galleryGrid.addEventListener('click', (e) => {
    if (e.target.closest('.editGalleryBtn')) {
      const i = e.target.closest('.editGalleryBtn').dataset.index;
      editingGalleryIndex = Number(i);
      galleryEditorTitle.textContent = "Edit Image";
      galleryImgTitle.value = gallery[i].title;
      galleryImgPreview.src = gallery[i].src;
      galleryImgPreview.classList.remove('hidden');
      tempGalleryImg = gallery[i].src;
      galleryImgEditor.classList.remove('translate-y-full');
    } else if (e.target.closest('.deleteGalleryBtn')) {
      const i = e.target.closest('.deleteGalleryBtn').dataset.index;
      gallery.splice(i, 1);
      renderGallery();
    } else if (e.target.tagName === 'IMG' && e.target.dataset.index !== undefined) {
      const i = e.target.dataset.index;
      galleryViewerTitle.textContent = gallery[i].title || "Image";
      galleryViewerContent.innerHTML = `<img src="${gallery[i].src}" class="max-h-[55vh] rounded-xl mx-auto" />`;
      galleryViewer.classList.remove('translate-y-full');
    }
  });
  closeGalleryViewer.addEventListener('click', () => {
    galleryViewer.classList.add('translate-y-full');
    galleryViewerContent.innerHTML = '';
  });
  renderGallery();

});


   // --- SIDEBAR ---

    const openSidebar = document.getElementById('openSidebar');
    const closeSidebar = document.getElementById('closeSidebar');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebarOverlay');

    openSidebar.addEventListener('click', () => {
      sidebar.classList.remove('-translate-x-full');
      overlay.classList.remove('hidden');
      document.body.classList.add('menu-open');
    });

    const closeMenu = () => {
      sidebar.classList.add('-translate-x-full');
      overlay.classList.add('hidden');
      document.body.classList.remove('menu-open');
    };

    closeSidebar.addEventListener('click', closeMenu);
    overlay.addEventListener('click', closeMenu);

    window.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
    });


// Bot√≥n cerrar sesi√≥n (logout)
const logoutBtn = document.getElementById('logoutBtn');
if (logoutBtn) {
  logoutBtn.addEventListener('click', function() {
    window.location.href = "login.html";
  });
}

// --- BLOQUE IMAGEN EDITABLE ---
// Referencias del bloque visible
const imageBlockCard = document.getElementById('imageBlockCard');
const editImageBlockBtn = document.getElementById('editImageBlockBtn');
const removeImageBlockBtn = document.getElementById('removeImageBlockBtn');

// Crear el modal editor solo una vez y agregarlo al body
const imageBlockEditor = document.createElement('div');
imageBlockEditor.id = 'imageBlockEditor';
imageBlockEditor.className = 'fixed bottom-0 inset-x-0 bg-white rounded-t-2xl shadow-super p-6 transition-all duration-300 transform translate-y-full z-50';
imageBlockEditor.innerHTML = `
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Editar bloque de imagen</h3>
    <button id="closeImageBlockEditor"><i data-lucide="x" class="w-6 h-6 text-gray-500"></i></button>
  </div>
  <input id="imageBlockFileInput" type="file" accept="image/*" class="block w-full text-sm text-gray-600 mb-4" />
  <input id="imageBlockTitleInput" type="text" placeholder="T√≠tulo" class="input-mock mb-4 w-full" />
  <textarea id="imageBlockTextInput" placeholder="Texto descriptivo" class="input-mock w-full resize-none" rows="4"></textarea>
  <button id="saveImageBlockBtn" class="btn-mock w-full mt-6">Guardar</button>
`;
document.body.appendChild(imageBlockEditor);

// AHORA S√ç: referencias a los elementos internos del modal (¬°ya existen!)
const closeImageBlockEditorBtn = document.getElementById('closeImageBlockEditor');
const saveImageBlockBtn = document.getElementById('saveImageBlockBtn');
const imageBlockFileInput = document.getElementById('imageBlockFileInput');
const imageBlockTitleInput = document.getElementById('imageBlockTitleInput');
const imageBlockTextInput = document.getElementById('imageBlockTextInput');
const imageBlockImg = imageBlockCard.querySelector('#imageBlockImg');
const imageBlockTitle = imageBlockCard.querySelector('#imageBlockTitle');
const imageBlockText = imageBlockCard.querySelector('#imageBlockText');

let tempImageBlockURL = "";

// Mostrar el modal cuando das click al l√°piz
editImageBlockBtn.addEventListener('click', () => {
  imageBlockTitleInput.value = imageBlockTitle.textContent;
  imageBlockTextInput.value = imageBlockText.textContent;
  tempImageBlockURL = "";
  imageBlockFileInput.value = '';
  imageBlockEditor.classList.remove('translate-y-full');
});

// Cerrar el modal
closeImageBlockEditorBtn.addEventListener('click', () => {
  imageBlockEditor.classList.add('translate-y-full');
  tempImageBlockURL = "";
  imageBlockFileInput.value = '';
});

// Cargar nueva imagen
imageBlockFileInput.addEventListener('change', (e) => {
  const file = e.target.files[0];
  if (file && file.type.startsWith('image/')) {
    const reader = new FileReader();
    reader.onload = function (event) {
      tempImageBlockURL = event.target.result;
    };
    reader.readAsDataURL(file);
  }
});

// Guardar cambios
saveImageBlockBtn.addEventListener('click', () => {
  if (tempImageBlockURL) {
    imageBlockImg.src = tempImageBlockURL;
  }
  imageBlockTitle.textContent = imageBlockTitleInput.value || 'T√≠tulo aqu√≠';
  imageBlockText.textContent = imageBlockTextInput.value || 'Texto descriptivo o informativo debajo del t√≠tulo.';
  imageBlockEditor.classList.add('translate-y-full');
  tempImageBlockURL = "";
  imageBlockFileInput.value = '';
});

// Quitar el bloque
removeImageBlockBtn.addEventListener('click', () => {
  imageBlockCard.style.display = 'none';
});




document.addEventListener('DOMContentLoaded', () => {
  lucide.createIcons();

  // ‚Äî‚Äî‚Äî‚Äî‚Äî gesti√≥n de secciones ‚Äî‚Äî‚Äî‚Äî‚Äî
  const dynamicSections    = document.getElementById('dynamicSections');
  const sectionPicker      = document.getElementById('sectionPicker');
  const addSectionBtn      = document.getElementById('addSectionBtn');
  const closeSectionPicker = document.getElementById('closeSectionPicker');
  const chooseSectionBtns  = document.querySelectorAll('.chooseSectionBtn');
  const sections = [
    'socialCard','linksCard','productsCard','videosCard',
    'testimonialsCard','documentsCard','galleryCard',
    'imageBlockCard','mapCard'
  ];

  sections.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = "none";
  });

  addSectionBtn.addEventListener('click', () => {
    sectionPicker.classList.remove('translate-y-full');
    lucide.createIcons();
  });
  closeSectionPicker.addEventListener('click', () => {
    sectionPicker.classList.add('translate-y-full');
  });

  chooseSectionBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.dataset.section;
      const section = document.getElementById(id);
      if (section && !dynamicSections.contains(section)) {
        section.style.display = "";
        dynamicSections.appendChild(section);
        addCloseBtn(section);
      }
      sectionPicker.classList.add('translate-y-full');
    });
  });

  function addCloseBtn(section) {
    if (!section.querySelector('.closeSectionBtn')) {
      const closeBtn = document.createElement('button');
      closeBtn.className = "closeSectionBtn";
      closeBtn.innerHTML = `<i data-lucide="x" class="w-6 h-6"></i>`;
      closeBtn.addEventListener('click', () => section.style.display = "none");
      section.appendChild(closeBtn);
      lucide.createIcons();
    }
  }

  // ‚Äî‚Äî‚Äî‚Äî‚Äî m√≥dulo de mapa ‚Äî‚Äî‚Äî‚Äî‚Äî
  let mapAddress = '';
  const editMapBtn     = document.getElementById('editMapBtn');
  const saveMapBtn     = document.getElementById('saveMapBtn');
  const mapContainer   = document.getElementById('mapContainer');
  const mapAddressInput = document.getElementById('mapAddressInput');
  const mapModal       = document.querySelector('.modal-sheet[data-modal="mapEditor"]');

  editMapBtn.addEventListener('click', () => {
    mapAddressInput.value = mapAddress;
    mapModal.classList.add('open');
    lucide.createIcons();
  });

  saveMapBtn.addEventListener('click', () => {
    mapAddress = mapAddressInput.value.trim();
    if (!mapAddress) return;
    const embedUrl =
      'https://www.google.com/maps?q=' +
      encodeURIComponent(mapAddress) +
      '&output=embed';
    mapContainer.innerHTML = `
      <iframe width="100%" height="100%" frameborder="0" style="border:0"
        src="${embedUrl}" allowfullscreen>
      </iframe>`;
    mapModal.classList.remove('open');
  });

  // ‚Äî‚Äî‚Äî‚Äî‚Äî toggle gen√©rico de modales ‚Äî‚Äî‚Äî‚Äî‚Äî
  document.body.addEventListener('click', e => {
    if (e.target.closest('[data-modal-open]')) {
      const id = e.target.closest('[data-modal-open]').dataset.modalOpen;
      document.querySelector(`.modal-sheet[data-modal="${id}"]`).classList.add('open');
    }
    if (e.target.closest('[data-modal-close]')) {
      const id = e.target.closest('[data-modal-close]').dataset.modalClose;
      document.querySelector(`.modal-sheet[data-modal="${id}"]`).classList.remove('open');
    }
  });

  // ‚Ä¶ aqu√≠ tu resto de m√≥dulos y el sidebar ‚Ä¶

});

// ‚Äî Contact Bubble Configurado por el due√±o + Front para el usuario ‚Äî
let contactConfig = { email: '', whatsapp: '', phone: '' };

const editContactBubbleBtn = document.getElementById('editContactBubbleBtn');
const saveContactBubbleBtn = document.getElementById('saveContactBubbleBtn');
const contactEditor       = document.querySelector('.modal-sheet[data-modal="contactBubbleEditor"]');
const optEmail            = document.getElementById('optEmail');
const optWhatsApp         = document.getElementById('optWhatsApp');
const optPhone            = document.getElementById('optPhone');
const inputEmail          = document.getElementById('inputEmail');
const inputWhatsApp       = document.getElementById('inputWhatsApp');
const inputPhone          = document.getElementById('inputPhone');

const toggleContactBubble = document.getElementById('toggleContactBubble');
const contactIcons        = document.getElementById('contactIcons');

// Abrir modal de configuraci√≥n
editContactBubbleBtn.addEventListener('click', () => {
  // Carga valores previos
  optEmail.checked      = !!contactConfig.email;
  optWhatsApp.checked   = !!contactConfig.whatsapp;
  optPhone.checked      = !!contactConfig.phone;
  inputEmail.value      = contactConfig.email;
  inputWhatsApp.value   = contactConfig.whatsapp;
  inputPhone.value      = contactConfig.phone;
  contactEditor.classList.add('open');
  lucide.createIcons();
});

// Guardar configuraci√≥n
saveContactBubbleBtn.addEventListener('click', () => {
  contactConfig.email    = optEmail.checked    ? inputEmail.value.trim()    : '';
  contactConfig.whatsapp = optWhatsApp.checked ? inputWhatsApp.value.trim() : '';
  contactConfig.phone    = optPhone.checked    ? inputPhone.value.trim()    : '';
  contactEditor.classList.remove('open');
  renderContactIcons(); // Actualiza los √≠conos
});

// Mostrar/ocultar panel de √≠conos para el usuario
toggleContactBubble.addEventListener('click', () => {
  contactIcons.classList.toggle('hidden');
});

// Funci√≥n que inyecta los √≠conos seg√∫n config
function renderContactIcons() {
  contactIcons.innerHTML = '';
  if (contactConfig.email) {
    contactIcons.innerHTML += `
      <a href="mailto:${contactConfig.email}" target="_blank" 
         class="p-2 bg-gray-100 rounded-full hover:bg-gray-200">
        <i data-lucide="mail" class="w-6 h-6 text-[#7BA9C8]"></i>
      </a>`;
  }
  if (contactConfig.whatsapp) {
    const num = contactConfig.whatsapp.replace(/\D/g,'');
    contactIcons.innerHTML += `
      <a href="https://wa.me/${num}" target="_blank"
         class="p-2 bg-gray-100 rounded-full hover:bg-gray-200">
        <i data-lucide="zap" class="w-6 h-6 text-[#25D366]"></i>
      </a>`;
  }
  if (contactConfig.phone) {
    const tel = contactConfig.phone.replace(/\D/g,'');
    contactIcons.innerHTML += `
      <a href="tel:${tel}"
         class="p-2 bg-gray-100 rounded-full hover:bg-gray-200">
        <i data-lucide="phone" class="w-6 h-6 text-[#0077B5]"></i>
      </a>`;
  }
  lucide.createIcons();
}

// Inicializa si ya hab√≠a config previa
renderContactIcons();


// ‚Äî Contact Form Module ‚Äî
let cfOwnerEmail = '';

const editContactFormBtn = document.getElementById('editContactFormBtn');
const saveContactFormBtn = document.getElementById('saveContactFormBtn');
const cfOwnerEmailInput = document.getElementById('cfOwnerEmail');
const contactFormModal = document.querySelector('.modal-sheet[data-modal="contactFormEditor"]');
const contactFormFront  = document.getElementById('contactFormFront');

editContactFormBtn.addEventListener('click', () => {
  cfOwnerEmailInput.value = cfOwnerEmail;
  contactFormModal.classList.add('open');
  lucide.createIcons();
});

saveContactFormBtn.addEventListener('click', () => {
  cfOwnerEmail = cfOwnerEmailInput.value.trim();
  contactFormModal.classList.remove('open');
});

contactFormFront.addEventListener('submit', e => {
  e.preventDefault();
  if (!cfOwnerEmail) {
    alert('El due√±o debe configurar el email receptor.');
    return;
  }
  const name    = document.getElementById('cfName').value.trim();
  const email   = document.getElementById('cfEmail').value.trim();
  const message = document.getElementById('cfMessage').value.trim();
  if (!name || !email || !message) {
    alert('Completa todos los campos.');
    return;
  }
  // Usamos mailto:
  const subject = encodeURIComponent(`Contacto de ${name}`);
  const body    = encodeURIComponent(`${message}\n\nEmail remitente: ${email}`);
  window.location.href = `mailto:${cfOwnerEmail}?subject=${subject}&body=${body}`;
});

// ‚Äî Quiz Module ‚Äî
let quizConfig = { q:'', opts: [], answer:1 };

const editQuizBtn    = document.getElementById('editQuizBtn');
const saveQuizBtn    = document.getElementById('saveQuizBtn');
const quizModal      = document.querySelector('.modal-sheet[data-modal="quizEditor"]');
const qeQuestion     = document.getElementById('qeQuestion');
const qeOpt1         = document.getElementById('qeOpt1');
const qeOpt2         = document.getElementById('qeOpt2');
const qeOpt3         = document.getElementById('qeOpt3');
const qeOpt4         = document.getElementById('qeOpt4');
const qeAnswer       = document.getElementById('qeAnswer');
const quizQuestionEl = document.getElementById('quizQuestion');
const quizOptionsEl  = document.getElementById('quizOptions');
const submitQuizBtn  = document.getElementById('submitQuizBtn');
const quizResultEl   = document.getElementById('quizResult');

function renderQuizFront() {
  quizQuestionEl.textContent = quizConfig.q;
  quizOptionsEl.innerHTML = '';
  quizConfig.opts.forEach((opt,i) => {
    quizOptionsEl.innerHTML += `
      <label class="flex items-center space-x-2">
        <input type="radio" name="quizOpt" value="${i+1}"/>
        <span>${opt}</span>
      </label>`;
  });
}

editQuizBtn.addEventListener('click', () => {
  qeQuestion.value = quizConfig.q;
  qeOpt1.value      = quizConfig.opts[0]||'';
  qeOpt2.value      = quizConfig.opts[1]||'';
  qeOpt3.value      = quizConfig.opts[2]||'';
  qeOpt4.value      = quizConfig.opts[3]||'';
  qeAnswer.value    = quizConfig.answer;
  quizModal.classList.add('open');
  lucide.createIcons();
});

saveQuizBtn.addEventListener('click', () => {
  quizConfig.q      = qeQuestion.value.trim();
  quizConfig.opts   = [qeOpt1.value, qeOpt2.value, qeOpt3.value, qeOpt4.value].map(s=>s.trim());
  quizConfig.answer = parseInt(qeAnswer.value,10);
  quizModal.classList.remove('open');
  renderQuizFront();
});

submitQuizBtn.addEventListener('click', () => {
  const chosen = document.querySelector('input[name="quizOpt"]:checked');
  if (!chosen) {
    alert('Selecciona una opci√≥n.');
    return;
  }
  const val = parseInt(chosen.value,10);
  if (val === quizConfig.answer) {
    quizResultEl.textContent = '¬°Correcto!';
  } else {
    quizResultEl.textContent = `Incorrecto. La respuesta es: ${quizConfig.opts[quizConfig.answer-1]}`;
  }
});

// Al cargar por primera vez
renderQuizFront();



</script>
</body>
</html>
